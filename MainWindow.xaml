<Window
    x:Class="RazorTemplateViewer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:convertors="clr-namespace:RazorTemplateViewer.Convertors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:RazorTemplateViewer"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:RazorTemplateViewer.Views"
    Title="MainWindow"
    Width="{Binding WindowWidth, Mode=TwoWay, FallbackValue=800}"
    Height="{Binding WindowHeight, Mode=TwoWay, FallbackValue=600}"
    MinWidth="400"
    MinHeight="600"
    d:DesignHeight="600"
    d:DesignWidth="800"
    AllowsTransparency="True"
    Background="Transparent"
    ResizeMode="CanResizeWithGrip"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.Resources>
        <convertors:BooleanToVisibilityConvertor x:Key="BoolToVisibility" />
    </Window.Resources>


    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="25" ResizeBorderThickness="10" />
    </WindowChrome.WindowChrome>

    <!--  Main window  -->
    <Border
        Background="Transparent"
        BorderBrush="{StaticResource DarkGreyBrush}"
        BorderThickness="1"
        CornerRadius="5">

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition />
            </Grid.RowDefinitions>

            <!--  Title Bar  -->
            <Border
                Grid.Row="0"
                Height="40"
                Background="{StaticResource DarkGreyBrush}"
                CornerRadius="{Binding TitleBarCornerRadius}"
                WindowChrome.IsHitTestVisibleInChrome="False">

                <!--  Window controls  -->
                <Grid HorizontalAlignment="right">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Button
                        Grid.Column="2"
                        Command="{Binding ExitAppCommand}"
                        Style="{StaticResource WindowButtonStyle}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                        <Border>
                            <Image Source="Assets\close-w-30.png" />
                        </Border>
                    </Button>

                    <Button
                        Grid.Column="1"
                        Command="{Binding MaximizedOrNormalWindowCommand}"
                        Style="{StaticResource WindowButtonStyle}"
                        Visibility="{Binding IsWindowMaximized, Converter={StaticResource BoolToVisibility}, ConverterParameter=reverse}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                        <Border>
                            <Image Source="Assets\max-w-30.png" />
                        </Border>
                    </Button>

                    <Button
                        Grid.Column="1"
                        Command="{Binding MaximizedOrNormalWindowCommand}"
                        Style="{StaticResource WindowButtonStyle}"
                        Visibility="{Binding IsWindowMaximized, Converter={StaticResource BoolToVisibility}}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                        <Border>
                            <Image Source="Assets\max-w-30.png" />
                        </Border>
                    </Button>

                    <Button
                        Grid.Column="0"
                        Command="{Binding MinimizedWindowCommand}"
                        Style="{StaticResource WindowButtonStyle}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                        <Border>
                            <Image Source="Assets\min-w-30.png" />
                        </Border>
                    </Button>
                </Grid>
            </Border>

            <!--  Main Content  -->
            <ContentControl
                Grid.Row="1"
                Margin="2,2,2,2"
                Background="White"
                Content="{Binding CurrentView}" />

        </Grid>

    </Border>
</Window>
