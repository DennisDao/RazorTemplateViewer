<Window x:Class="RazorTemplateViewer.MainWindow"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:local="clr-namespace:RazorTemplateViewer"
         mc:Ignorable="d"
         Title="MainWindow"
         Width="{Binding WindowWidth, Mode=TwoWay, FallbackValue=800}"
         Height="{Binding WindowHeight, Mode=TwoWay, FallbackValue=600}"
         MinWidth="400"
         MinHeight="600"
         d:DesignHeight="600"
         d:DesignWidth="800"
         AllowsTransparency="True"
         Background="Transparent"
         ResizeMode="{Binding ResizeMode, Mode=TwoWay}"
         WindowStyle="None"
        >

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="60" ResizeBorderThickness="20" />
    </WindowChrome.WindowChrome>

    <Border Padding="{Binding WindowGutterWidth}">

        <!--  Main window  -->
        <Grid>

            <Border
            x:Name="Container"
            Background="Transparent"
            CornerRadius="10">

                <Border Background="White" CornerRadius="10">

                    <Border.Effect>
                        <DropShadowEffect Opacity="0.2" ShadowDepth="0" />
                    </Border.Effect>

                    <Grid>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="40" />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <!--  Title Bar  -->
                        <Border
                        Grid.Row="0"
                        Grid.Column="0"
                        Height="40"
                        Background="{StaticResource DarkGreyBrush}"
                        CornerRadius="{Binding TitleBarCornerRadius}"
                        WindowChrome.IsHitTestVisibleInChrome="False">

                            <!--  Window controls  -->
                            <Grid HorizontalAlignment="right">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Button
                                Grid.Column="2"
                                Command="{Binding ExitAppCommand}"
                                Style="{StaticResource WindowButtonStyle}"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                                    <Border>
                                        <Image Source="Assets\close-w-30.png" />
                                    </Border>
                                </Button>

                                <Button
                                Grid.Column="1"
                                Command="{Binding MaximizedWindowCommand}"
                                Style="{StaticResource WindowButtonStyle}"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                                    <Border>
                                        <Image Source="Assets\max-w-30.png" />
                                    </Border>

                                </Button>

                                <Button
                                Grid.Column="0"
                                Command="{Binding MinimizedWindowCommand}"
                                Style="{StaticResource WindowButtonStyle}"
                                WindowChrome.IsHitTestVisibleInChrome="True">
                                    <Border>
                                        <Image Source="Assets\min-w-30.png" />
                                    </Border>

                                </Button>
                            </Grid>


                        </Border>

                        <!--  Main Content  -->
                        <Border
                        x:Name="Main"
                        Grid.Row="1"
                        Background="White"
                        CornerRadius="0,0,10,10">
                            <ContentControl x:Name="mainContent" Content="{Binding CurrentView}" />
                        </Border>

                    </Grid>

                </Border>

            </Border>

        </Grid>

    </Border>
</Window>
